#:kivy 1.9.1

<Scoreboard>:
    size: self.parent.width/4, self.parent.top*3/4
    canvas:
        Color:
            rgba: 0,0,0,0.2
        Rectangle:
            pos: self.pos
            size: self.size

    Label:
        font_size: 20
        pos: self.width/2, root.top*0.88
        text: "State of the game"


    Label:
        font_size: 15
        pos: self.width/2, root.top*0.83
        text: "Dollars: " + str(root.dollars)

    Label:
        font_size: 15
        pos: self.width/2, root.top*0.80
        text: "Bitcoins: " + str(root.bitcoins)

    Label:
        font_size: 15
        pos: self.width/2, root.top*0.77
        text: "$ per BTC: " + str(self.parent.btc_rate)

    Label:
        font_size: 12
        size: root.width*0.9, root.top*0.9/3.3
        pos: root.width*0.05, root.top*0.545
        text: str(self.parent.ingredients_list)
        canvas:
            Color:
                rgba: 0,0,0,0.2
            Rectangle:
                pos: self.pos
                size: self.size

    Label:
        size: root.width*0.9, root.top*0.9/3.3
        font_size: 12
        pos: root.width*0.05, root.top*0.255
        text: str(self.parent.equipment_list)
        canvas:
            Color:
                rgba: 0,0,0,0.2
            Rectangle:
                pos: self.pos
                size: self.size

#
#   Label:
#       id: debug
#       font_size: 15
#       pos: self.width/2, root.top*0.4
#       text: ""
#
# #  Label:
  #      font_size: 20
  #      pos: self.width/2, root.top*0.35
  #      text: "Risk level " + str(self.parent.risk)
  #
  #  Label:
  #      font_size: 20
  #      pos: self.width/2, root.top*0.3
  #      text: "Timer " + str(self.parent.minutes) + ":" + str(self.parent.seconds)
  #


<Actions>
    size: self.parent.width, self.parent.top/4
    padding: 3,3,3,2
    spacing: 3
    canvas:
        Color:
            rgba: 0,0,0,0.2
        Rectangle:
            pos: self.pos
            size: self.size


    Button:
        id: exchange
        text: "Currency exchange"
        on_release: root.exchange(root.parent)

        text_size: self.size
        halign: 'center'
        valign: 'middle'
        bold: True
        font_hinting: 'mono'
        font_size: 20
        border: (20,20,20,20)



    Button:
        id: lab
        text: "Drug lab"
        on_release: root.lab(root.parent)

        text_size: self.size
        halign: 'center'
        valign: 'middle'
        bold: True
        font_hinting: 'mono'
        font_size: 20


    Button:
        id: shop
        text: "Shop"
        on_release: root.shop(root.parent)

        text_size: self.size
        halign: 'center'
        valign: 'middle'
        bold: True
        font_hinting: 'mono'
        font_size: 20


    Button:
        id: market
        text: "Pied Piper: Dark market"
        on_release: root.market(root.parent)

        text_size: self.size
        halign: 'center'
        valign: 'middle'
        bold: True
        font_hinting: 'mono'
        font_size: 20


    Button:
        id: event
        text: "Opens event"
        on_release: root.event(root.parent)

        text_size: self.size
        halign: 'center'
        valign: 'middle'
        bold: True
        font_hinting: 'mono'
        font_size: 20

#    Button:
#        id: debug
#        text: "Debug ON/OFF"
#        on_release: root.debug(root.parent)

    Button:
        id: restart
        text: "Restart the game"
        on_release: root.restart(self.parent.parent)

        text_size: self.size
        halign: 'center'
        valign: 'middle'
        bold: True
        font_hinting: 'mono'
        font_size: 20


<MainWindow>
    size: self.parent.width*3/4, self.parent.top*3/4
    canvas.before:
        Color:
            rgba: 0,0,255,0
        Rectangle:
            pos: self.pos
            size: self.size



<Events>

<MainGame>:
    score: scoreid
    actions: actionsid
    main: mainid
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'media/Background4.jpg'
    Scoreboard:
        id: scoreid
        pos: 0, root.top*3/12

    Actions:
        id: actionsid
        pos: 0, 0

    Events:
        id: eventsid
        pos: root.width/2, root.top/2

    MainWindow:
        id: mainid
        pos: root.width/4, root.top/4

    ProgressBar:
        id: pb
        value: root.score.time
        max: root.score.timelimit
        pos: 0, root.top/4-self.height/2
        width: root.width